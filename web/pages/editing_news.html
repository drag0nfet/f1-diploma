<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Создание/Редактирование новости</title>
    <link rel="stylesheet" href="/web/styles/general.css">
    <link rel="stylesheet" href="/web/styles/editing_news.css">
    <script src="https://cdn.jsdelivr.net/npm/marked@4.0.12/marked.min.js"></script>
</head>
<body>
<div class="container">
    <aside class="left-sidebar" id="left-sidebar">
        <a href="/" class="sidebar-link" data-code="home">Главная</a>
        <a href="/web/forum" class="sidebar-link" data-code="forum">Форум</a>
        <a href="#" class="sidebar-link" data-code="goods">Товары</a>
        <a href="/web/bar" class="sidebar-link" data-code="bar">Бар</a>
        <a href="#" class="sidebar-link" data-code="booking">Бронь столиков</a>
    </aside>
    <main class="main">
        <button class="menu-btn" id="menu-btn">☰</button>
        <div class="news-form-container">
            <h2>Создание/Редактирование новости</h2>
            <div class="news-form">
                <label>
                    Название новости:
                    <input type="text" id="news-title" placeholder="Введите название" maxlength="64" required>
                </label>
                <label>
                    Краткое описание:
                    <textarea id="news-description" placeholder="Введите описание (опционально)" rows="4"></textarea>
                </label>
                <label>
                    Содержание:
                    <textarea id="news-comment" placeholder="Введите содержание в формате Markdown" rows="6" oninput="updateMarkdownPreview()" required></textarea>
                </label>
                <div class="markdown-preview">
                    <h3>Предпросмотр содержания:</h3>
                    <div id="markdown-preview-content"></div>
                </div>
                <div class="image-preview-container">
                    <div class="current-image">
                        <h3>Текущее изображение:</h3>
                        <img id="current-image-preview" style="display: none;" alt="Текущее изображение" src="">
                    </div>
                    <label>
                        Новое изображение (jpeg, png, bmp, webp):
                        <input type="file" id="news-image" accept="image/jpeg,image/png,image/bmp,image/webp">
                    </label>
                </div>
            </div>
            <div class="news-actions">
                <button class="action-btn publish-btn" id="publish-btn" data-status="ACTIVE">Опубликовать</button>
                <button class="action-btn draft-btn" id="draft-btn" data-status="DRAFT">Сохранить черновик</button>
                <button class="action-btn archive-btn" id="archive-btn" data-status="ARCHIVE">Отправить в архив</button>
                <button class="action-btn delete-btn" id="delete-btn">Удалить</button>
            </div>
        </div>
    </main>
</div>
<div class="overlay" id="overlay"></div>
<script>
    function updateMarkdownPreview() {
        const commentInput = document.getElementById("news-comment").value;
        const previewDiv = document.getElementById("markdown-preview-content");
        previewDiv.innerHTML = marked.parse(commentInput);
    }
</script>
<script type="module" src="/web/js/editing_news/main.js"></script>
</body>
</html>